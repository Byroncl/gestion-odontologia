{"version":3,"file":"static/js/918.18e6d878.chunk.js","mappings":"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","sources":["components/usuario/Perfil.tsx","utils/auth.ts"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport '../../assets/css/Perfil.css';\r\nimport '../../assets/css/barra.css';\r\nimport { getLoggedInUser, updateUserInLocalStorage } from '../../utils/auth';\r\nimport { User } from '../../utils/users';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Perfil: React.FC = () => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [editableUser, setEditableUser] = useState<User | null>(null);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const loggedInUser = getLoggedInUser();\r\n    if (loggedInUser) {\r\n      setUser(loggedInUser);\r\n      setEditableUser({ ...loggedInUser });\r\n    }\r\n  }, []);\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (editableUser) {\r\n      const { name, value } = e.target;\r\n      setEditableUser({ ...editableUser, [name]: value });\r\n    }\r\n  };\r\n\r\n  const handleUpdate = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (editableUser) {\r\n      updateUserInLocalStorage(editableUser);\r\n      setUser(editableUser);\r\n      alert('Datos actualizados con éxito');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n    <nav className=\"navbar\">\r\n      <ul className=\"navbar-links\">\r\n        <li><Link to=\"/\">Cerrar sesión</Link></li>\r\n        <li><Link to=\"/registro-citas\">Registro Citas</Link></li>\r\n        <li><Link to=\"/perfil\">Perfil</Link></li>\r\n      </ul>\r\n    </nav>\r\n    \r\n    <div className=\"perfil-container\">\r\n      <h2>Perfil de Usuario</h2>\r\n      {user && editableUser ? (\r\n        <form className=\"perfil-form\" onSubmit={handleUpdate}>\r\n          <input\r\n            type=\"text\"\r\n            name=\"username\"\r\n            placeholder=\"Nombre de usuario\"\r\n            value={editableUser.username}\r\n            onChange={handleInputChange}\r\n            required\r\n            readOnly\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            name=\"nombre\"\r\n            placeholder=\"Nombre\"\r\n            value={editableUser.nombre}\r\n            onChange={handleInputChange}\r\n            required\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            name=\"apellido\"\r\n            placeholder=\"Apellido\"\r\n            value={editableUser.apellido}\r\n            onChange={handleInputChange}\r\n            required\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            placeholder=\"Contraseña\"\r\n            value={editableUser.password}\r\n            onChange={handleInputChange}\r\n            required\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            name=\"cedula\"\r\n            placeholder=\"Cédula\"\r\n            value={editableUser.cedula}\r\n            onChange={handleInputChange}\r\n            required\r\n          />\r\n          <input\r\n            type=\"date\"\r\n            name=\"fechaNacimiento\"\r\n            placeholder=\"Fecha de nacimiento\"\r\n            value={editableUser.fechaNacimiento}\r\n            onChange={handleInputChange}\r\n            required\r\n          />\r\n          <input\r\n            type=\"email\"\r\n            name=\"correo\"\r\n            placeholder=\"Correo\"\r\n            value={editableUser.correo}\r\n            onChange={handleInputChange}\r\n            required\r\n          />\r\n          {error && <p className=\"error\">{error}</p>}\r\n          <button type=\"submit\">Actualizar</button>\r\n        </form>\r\n      ) : (\r\n        <p>Cargando datos del usuario...</p>\r\n      )}\r\n    </div>\r\n    </>\r\n    \r\n  );\r\n};\r\n\r\nexport default Perfil;\r\n","// ../../utils/auth.ts\r\nimport { User } from '../utils/users';\r\n\r\nconst USERS_KEY = 'users';\r\nconst LOGGED_IN_USER_KEY = 'loggedInUser';\r\n\r\nexport const saveUserToLocalStorage = (user: User) => {\r\n  const users = JSON.parse(localStorage.getItem(USERS_KEY) || '[]');\r\n  users.push(user);\r\n  localStorage.setItem(USERS_KEY, JSON.stringify(users));\r\n};\r\n\r\nexport const getUsersFromLocalStorage = (): User[] => {\r\n  return JSON.parse(localStorage.getItem(USERS_KEY) || '[]');\r\n};\r\n\r\nexport const deleteUserFromLocalStorage = (username: string) => {\r\n  const users = JSON.parse(localStorage.getItem(USERS_KEY) || '[]');\r\n  const updatedUsers = users.filter((user: User) => user.username !== username);\r\n  localStorage.setItem(USERS_KEY, JSON.stringify(updatedUsers));\r\n};\r\n\r\nexport const authenticateUser = (username: string, password: string): boolean => {\r\n  const users = getUsersFromLocalStorage();\r\n  const user = users.find(u => u.username === username && u.password === password);\r\n  if (user) {\r\n    localStorage.setItem(LOGGED_IN_USER_KEY, JSON.stringify(user));\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const getLoggedInUser = (): User | null => {\r\n  const user = localStorage.getItem(LOGGED_IN_USER_KEY);\r\n  return user ? JSON.parse(user) : null;\r\n};\r\n\r\nexport const updateUserInLocalStorage = (updatedUser: User) => {\r\n  const users = JSON.parse(localStorage.getItem(USERS_KEY) || '[]');\r\n  const updatedUsers: User[] = users.map((user: User) =>\r\n    user.username === updatedUser.username ? updatedUser : user\r\n  );\r\n  localStorage.setItem(USERS_KEY, JSON.stringify(updatedUsers));\r\n\r\n  // También actualizar el usuario actualmente autenticado\r\n  localStorage.setItem(LOGGED_IN_USER_KEY, JSON.stringify(updatedUser));\r\n};\r\n"],"names":["Perfil","user","setUser","useState","editableUser","setEditableUser","error","setError","useEffect","loggedInUser","getLoggedInUser","handleInputChange","e","name","value","target","_jsxs","_Fragment","children","_jsx","className","Link","to","onSubmit","preventDefault","updateUserInLocalStorage","alert","type","placeholder","username","onChange","required","readOnly","nombre","apellido","password","cedula","fechaNacimiento","correo","USERS_KEY","LOGGED_IN_USER_KEY","saveUserToLocalStorage","users","JSON","parse","localStorage","getItem","push","setItem","stringify","getUsersFromLocalStorage","deleteUserFromLocalStorage","updatedUsers","filter","authenticateUser","find","u","updatedUser","map"],"sourceRoot":""}